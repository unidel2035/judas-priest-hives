# K_DA Test Configuration - Telemetry and Tracking DISABLED
# This configuration file disables all telemetry, tracking, and data collection
# mechanisms identified in the biometrics and tracking analysis.
#
# Usage:
#   cp .env.test.no-telemetry .env
#   node k_da.js
#
# Or run with environment variables:
#   export $(cat .env.test.no-telemetry | xargs) && node k_da.js

# ==============================================================================
# Core Application Settings
# ==============================================================================

# Set to production to disable debug telemetry
NODE_ENV=production

# Disable debug output
# DEBUG=

# Disable authentication debugging
# DEBUG_AUTH=false

# ==============================================================================
# OpenTelemetry - DISABLED
# ==============================================================================

# Disable OpenTelemetry resource detectors
# This prevents collection of host, OS, and environment information
OTEL_NODE_RESOURCE_DETECTORS=none

# Disable OTLP exporter endpoint (no telemetry destination)
# OTEL_EXPORTER_OTLP_ENDPOINT=

# Disable all OpenTelemetry SDK
OTEL_SDK_DISABLED=true

# Additional OTEL variables to ensure no telemetry
OTEL_TRACES_EXPORTER=none
OTEL_METRICS_EXPORTER=none
OTEL_LOGS_EXPORTER=none

# ==============================================================================
# Koda Service Configuration - Minimal
# ==============================================================================

# Use minimal API base (or set to local/test endpoint)
# KODA_API_BASE=http://localhost:8080

# Disable automatic authentication
KODA_FORCE_AUTH=false

# Disable automatic CLI relaunch (prevents tracking of session restarts)
KODA_CLI_NO_RELAUNCH=true

# Set response language (prevents language fingerprinting from headers)
KODA_RESPONSE_LANGUAGE=en

# ==============================================================================
# Analytics and Tracking - DISABLED
# ==============================================================================

# Disable web search (prevents search query tracking)
# KODA_WEB_SEARCH_BASE_URL=

# Disable any analytics endpoints
# GOOGLE_ANALYTICS_ID=
# ANALYTICS_ENABLED=false

# ==============================================================================
# IDE Integration - DISABLED
# ==============================================================================

# Disable IDE server integration (prevents workspace tracking)
# KODA_CLI_IDE_SERVER_PORT=
# KODA_CLI_IDE_WORKSPACE_PATH=

# Disable Gemini CLI IDE integration
# GEMINI_CLI_IDE_SERVER_PORT=
# GEMINI_CLI_IDE_WORKSPACE_PATH=
# GEMINI_CLI_SYSTEM_SETTINGS_PATH=

# Disable IDE integration testing
GEMINI_CLI_INTEGRATION_TEST=false

# ==============================================================================
# Google Cloud & AI - DISABLED
# ==============================================================================

# Disable Google API key (no Google service tracking)
# GOOGLE_API_KEY=

# Disable Google Application Credentials
# GOOGLE_APPLICATION_CREDENTIALS=

# Disable Google Cloud Project tracking
# GOOGLE_CLOUD_PROJECT=
# GOOGLE_CLOUD_LOCATION=

# Disable Google GenAI usage
GOOGLE_GENAI_USE_GCA=false
GOOGLE_GENAI_USE_VERTEXAI=false

# Disable GCE metadata host (prevents GCP environment detection)
# GCE_METADATA_HOST=

# ==============================================================================
# GitHub Integration - MINIMAL
# ==============================================================================

# Disable automatic GitHub login (prevents GitHub identity tracking)
LOGIN_WITH_GITHUB=false

# GitHub token (only if needed, otherwise leave empty)
# GITHUB_TOKEN=
# KODA_GITHUB_TOKEN=

# Disable GitHub exchange URL
# KODA_GITHUB_EXCHANGE_URL=

# Minimal GitHub scopes if authentication is absolutely required
GITHUB_SCOPES=read:user

# ==============================================================================
# AWS Configuration - DISABLED
# ==============================================================================

# No AWS credentials (prevents AWS environment detection)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_SESSION_TOKEN=
# AWS_REGION=
# AWS_DEFAULT_REGION=

# ==============================================================================
# Sandbox Configuration - DISABLED
# ==============================================================================

# Disable sandbox mode (prevents execution environment tracking)
SANDBOX=false
BUILD_SANDBOX=false
GEMINI_SANDBOX=false

# Clear sandbox configuration
# SANDBOX_ENV=
# SANDBOX_FLAGS=
# SANDBOX_MOUNTS=
# SANDBOX_PORTS=
# SANDBOX_SET_UID_GID=false

# ==============================================================================
# Network & Proxy - NONE
# ==============================================================================

# No proxy configuration (prevents network fingerprinting)
# HTTP_PROXY=
# HTTPS_PROXY=
# NO_PROXY=
# grpc_proxy=
# no_grpc_proxy=

# ==============================================================================
# gRPC Configuration - DISABLED
# ==============================================================================

# Disable gRPC verbosity (prevents gRPC telemetry)
# GRPC_VERBOSITY=
# GRPC_NODE_VERBOSITY=

# Disable gRPC tracing
# GRPC_TRACE=
# GRPC_NODE_TRACE=

# ==============================================================================
# Terminal & Display - MINIMAL
# ==============================================================================

# Basic terminal type
TERM=xterm-256color

# No terminal program detection
# TERM_PROGRAM=
# TERM_PRODUCT=

# Disable color term detection
# COLORTERM=

# ==============================================================================
# Environment Detection - DISABLED
# ==============================================================================

# Disable cloud shell detection
# CLOUD_SHELL=false

# Disable codespaces detection
# CODESPACES=false

# Disable JetBrains IDE detection
# JETBRAINS_IDE=false

# Disable cursor integration
# CURSOR_TRACE_ID=

# ==============================================================================
# Third-Party Model Providers - DISABLED
# ==============================================================================

# Disable Polza AI integration
# POLZA_API_KEY=
# POLZA_API_BASE=
# POLZA_DEFAULT_MODEL=

# ==============================================================================
# Machine ID Collection - MITIGATION
# ==============================================================================

# Note: Machine ID collection happens at runtime through system calls
# and cannot be fully disabled via environment variables.
#
# The application collects:
# - macOS: IOPlatformUUID via ioreg command
# - Linux: /etc/machine-id or /var/lib/dbus/machine-id
# - FreeBSD: /etc/hostid or kenv smbios.system.uuid
# - Windows: MachineGuid from registry
#
# To prevent machine ID collection, you would need to:
# 1. Run in a containerized environment with fake machine IDs
# 2. Use a sandbox that intercepts system calls
# 3. Patch the k_da.js code to disable machine ID collection
#
# For testing purposes, running in Docker with --hostname flag can
# provide a consistent, non-identifying hostname.

# ==============================================================================
# Privacy-Focused CLI Flags
# ==============================================================================

# When running k_da.js, use these CLI flags to further disable telemetry:
#
# --no-telemetry                 Disable all telemetry
# --telemetry=false              Explicitly disable telemetry
# --no-analytics                 Disable analytics (if supported)
# --offline                      Offline mode (if supported)
#
# Example usage:
#   node k_da.js --no-telemetry --help
#   node k_da.js --telemetry=false "your prompt here"

# ==============================================================================
# Additional Privacy Recommendations
# ==============================================================================

# 1. Network-level blocking:
#    Block outgoing connections to known telemetry endpoints:
#    - api.kodacode.ru (Koda API)
#    - Google Cloud endpoints
#    - OpenTelemetry collector endpoints
#
# 2. Filesystem monitoring:
#    Monitor for configuration files being written:
#    - ~/.koda/
#    - ~/.config/koda/
#    - Any telemetry cache files
#
# 3. Run in isolated environment:
#    - Use Docker container with network restrictions
#    - Use VM with controlled network access
#    - Use firewall rules to block telemetry endpoints
#
# 4. Review source code:
#    - Check k_da/src/04-app-code.js for telemetry initialization
#    - Search for "telemetry", "analytics", "tracking" in code
#    - Review k_da/BIOMETRICS_AND_TRACKING_ANALYSIS.md for details

# ==============================================================================
# Testing and Verification
# ==============================================================================

# After setting these variables, verify no telemetry is being sent:
#
# 1. Network monitoring:
#    sudo tcpdump -i any -n host api.kodacode.ru
#    sudo tcpdump -i any -n port 443 and host \!localhost
#
# 2. Process monitoring:
#    strace -e trace=network node k_da.js --help 2>&1 | grep connect
#
# 3. File system monitoring:
#    ls -la ~/.koda/
#    ls -la ~/.config/koda/
#
# 4. Environment variable check:
#    node -e "console.log(process.env)" | grep -i otel

# ==============================================================================
# Build Test Configuration
# ==============================================================================

# Use this configuration when testing the build process to ensure
# no telemetry is collected during build time.

# Disable any build-time telemetry
BUILD_TELEMETRY=false
CI=false
CONTINUOUS_INTEGRATION=false

# Clear any CI environment variables that might enable tracking
# GITHUB_ACTIONS=
# GITLAB_CI=
# CIRCLECI=
# TRAVIS=
# JENKINS_URL=

# ==============================================================================
# Summary
# ==============================================================================

# This configuration file disables:
# ✅ OpenTelemetry (OTEL) tracking
# ✅ Google Cloud Platform integration
# ✅ AWS environment detection
# ✅ GitHub integration (optional)
# ✅ IDE workspace tracking
# ✅ Sandbox execution tracking
# ✅ Network proxy configuration
# ✅ gRPC telemetry
# ✅ Terminal fingerprinting
# ✅ Cloud environment detection
#
# Note: Machine ID collection happens at OS level and requires
# additional measures (containerization, sandboxing, or code patching)
# to fully prevent. See "Machine ID Collection - Mitigation" section above.

# ==============================================================================
# License and Attribution
# ==============================================================================

# This configuration file was created as part of the k_da deobfuscation
# and security analysis project.
#
# For more information, see:
# - k_da/BIOMETRICS_AND_TRACKING_ANALYSIS.md
# - k_da/STRING_EXTRACTION_REPORT.md
# - k_da/DEOBFUSCATION_REPORT.md
